@using TomPIT.ComponentModel;

@model TomPIT.Middleware.IMiddlewareContext

@{
   var rootUrl = Model.Services.Routing.RootUrl;
   var component = string.Empty;

   if (Model is IComponentModel cm && cm.Component != null)
   { component = string.Format("{0}.{1}", cm.Component.MicroService.ToString(), cm.Component.Token.ToString()); }

   var uiModel = Model as IViewModel;
   var view = string.Empty;

   if(uiModel != null)
   {
       view = $"{uiModel.MicroService.Name}/{uiModel.ViewConfiguration.ComponentName()}";
   }
}

<script>
    tompit.DEFAULTS = {
        appUrl: '@rootUrl',
        component: '@component',
        view: '@view'
    };

    tompit.GLOBALIZE = {
        appUrlNotSet: '@SR.JsAppUrlNotSet',
    };
</script>